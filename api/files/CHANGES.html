<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>File: CHANGES [Sinatra API Documentation]</title>
    <meta content='text/html; charset=utf8' http-equiv='Content-Type'>
    <link href='../rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='file' id='wrapper'>
      <div class='header'>
        <div class='name'>CHANGES</div>
        <div class='paths'>
          CHANGES
        </div>
        <div class='last-update'>
          Last Update:
          <span class='datetime'>Mon May 18 18:50:46 -0500 2009</span>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            <h1>0.9.2 / 2009-05-18</h1>
            <pre>* This version is compatible with Rack 1.0. [Rein Henrichs]&#x000A;&#x000A;* The development-mode unhandled exception / error page has been&#x000A;  greatly enhanced, functionally and aesthetically. The error&#x000A;  page is used when the :show_exceptions option is enabled and an&#x000A;  exception propagates outside of a route handler or before filter.&#x000A;  [Simon Rozet / Matte Noble / Ryan Tomayko]&#x000A;&#x000A;* Backtraces that move through templates now include filenames and&#x000A;  line numbers where possible. [#51 / S. Brent Faulkner]&#x000A;&#x000A;* All templates now have an app-level option for setting default&#x000A;  template options (:haml, :sass, :erb, :builder). The app-level&#x000A;  option value must be a Hash if set and is merged with the&#x000A;  template options specified to the render method (Base#haml,&#x000A;  Base#erb, Base#builder). [S. Brent Faulkner, Ryan Tomayko]&#x000A;&#x000A;* The method signature for all template rendering methods has&#x000A;  been unified: &quot;def engine(template, options={}, locals={})&quot;.&#x000A;  The options Hash now takes the generic :views, :layout, and&#x000A;  :locals options but also any template-specific options. The&#x000A;  generic options are removed before calling the template specific&#x000A;  render method. Locals may be specified using either the&#x000A;  :locals key in the options hash or a second Hash option to the&#x000A;  rendering method. [#191 / Ryan Tomayko]&#x000A;&#x000A;* The receiver is now passed to &quot;configure&quot; blocks. This&#x000A;  allows for the following idiom in top-level apps:&#x000A;  configure { |app| set :foo, app.root + '/foo' }&#x000A;  [TJ Holowaychuck / Ryan Tomayko]&#x000A;&#x000A;* The &quot;sinatra/test&quot; lib is deprecated and will be removed in&#x000A;  Sinatra 1.0. This includes the Sinatra::Test module and&#x000A;  Sinatra::TestHarness class in addition to all the framework&#x000A;  test helpers that were deprecated in 0.9.1. The Rack::Test&#x000A;  lib should be used instead: http://gitrdoc.com/brynary/rack-test&#x000A;  [#176 / Simon Rozet]&#x000A;&#x000A;* Development mode source file reloading has been removed. The&#x000A;  &quot;shotgun&quot; (http://rtomayko.github.com/shotgun/) program can be&#x000A;  used to achieve the same basic functionality in most situations.&#x000A;  Passenger users should use the &quot;tmp/always_restart.txt&quot;&#x000A;  file (http://tinyurl.com/c67o4h). [#166 / Ryan Tomayko]&#x000A;&#x000A;* Auto-requiring template libs in the erb, builder, haml, and&#x000A;  sass methods is deprecated due to thread-safety issues. You must&#x000A;  require the template libs explicitly in your app file. [Simon Rozet]&#x000A;&#x000A;* A new Sinatra::Base#route_missing method was added. route_missing&#x000A;  is sent when no route matches the request or all route handlers&#x000A;  pass.  The default implementation forwards the request to the&#x000A;  downstream app when running as middleware (i.e., &quot;@app&quot; is&#x000A;  non-nil), or raises a NotFound exception when no downstream app&#x000A;  is defined. Subclasses can override this method to perform custom&#x000A;  route miss logic. [Jon Crosby]&#x000A;&#x000A;* A new Sinatra::Base#route_eval method was added. The method&#x000A;  yields to the block and throws :halt with the result. Subclasses&#x000A;  can override this method to tap into the route execution logic.&#x000A;  [TJ Holowaychuck]&#x000A;&#x000A;* Fix the &quot;-x&quot; (enable request mutex / locking) command line&#x000A;  argument. Passing -x now properly sets the :lock option.&#x000A;  [S. Brent Faulkner, Ryan Tomayko]&#x000A;&#x000A;* Fix writer (&quot;foo=&quot;) and predicate (&quot;foo?&quot;) methods in extension&#x000A;  modules not being added to the registering class.&#x000A;  [#172 / Pat Nakajima]&#x000A;&#x000A;* Fix in-file templates when running alongside activesupport and&#x000A;  fatal errors when requiring activesupport before sinatra&#x000A;  [#178 / Brian Candler]&#x000A;&#x000A;* Fix various issues running on Google AppEngine.&#x000A;  [Samuel Goebert, Simon Rozet]&#x000A;&#x000A;* Fix in-file templates __END__ detection when __END__ exists with&#x000A;  other stuff on a line [Yoji Shidara]</pre>
            <h1>0.9.1.1 / 2009-03-09</h1>
            <pre>* Fix directory traversal vulnerability in default static files&#x000A;  route. See [#177] for more info.</pre>
            <h1>0.9.1 / 2009-03-01</h1>
            <pre>* Sinatra now runs under Ruby 1.9.1 [#61]&#x000A;&#x000A;* Route patterns (splats, :named, or Regexp captures) are now&#x000A;  passed as arguments to the block. [#140]&#x000A;&#x000A;* The &quot;helpers&quot; method now takes a variable number of modules&#x000A;  along with the normal block syntax. [#133]&#x000A;&#x000A;* New request-level #forward method for middleware components: passes&#x000A;  the env to the downstream app and merges the response status, headers,&#x000A;  and body into the current context. [#126]&#x000A;&#x000A;* Requests are now automatically forwarded to the downstream app when&#x000A;  running as middleware and no matching route is found or all routes&#x000A;  pass.&#x000A;&#x000A;* New simple API for extensions/plugins to add DSL-level and&#x000A;  request-level methods. Use Sinatra.register(mixin) to extend&#x000A;  the DSL with all public methods defined in the mixin module;&#x000A;  use Sinatra.helpers(mixin) to make all public methods defined&#x000A;  in the mixin module available at the request level. [#138]&#x000A;  See http://www.sinatrarb.com/extensions.html for details.&#x000A;&#x000A;* Named parameters in routes now capture the &quot;.&quot; character. This makes&#x000A;  routes like &quot;/:path/:filename&quot; match against requests like&#x000A;  &quot;/foo/bar.txt&quot;; in this case, &quot;params[:filename]&quot; is &quot;bar.txt&quot;.&#x000A;  Previously, the route would not match at all.&#x000A;&#x000A;* Added request-level &quot;redirect back&quot; to redirect to the referring&#x000A;  URL.&#x000A;&#x000A;* Added a new &quot;clean_trace&quot; option that causes backtraces dumped&#x000A;  to rack.errors and displayed on the development error page to&#x000A;  omit framework and core library backtrace lines. The option is&#x000A;  enabled by default. [#77]&#x000A;&#x000A;* The ERB output buffer is now available to helpers via the @_out_buf&#x000A;  instance variable.&#x000A;&#x000A;* It's now much easier to test sessions in unit tests by passing a&#x000A;  &quot;:session&quot; option to any of the mock request methods. e.g.,&#x000A;      get '/', {}, :session =&gt; { 'foo' =&gt; 'bar' }&#x000A;&#x000A;* The testing framework specific files ('sinatra/test/spec',&#x000A;  'sinatra/test/bacon', 'sinatra/test/rspec', etc.) have been deprecated.&#x000A;  See http://sinatrarb.com/testing.html for instructions on setting up&#x000A;  a testing environment with these frameworks.&#x000A;&#x000A;* The request-level #send_data method from Sinatra 0.3.3 has been added&#x000A;  for compatibility but is deprecated.&#x000A;&#x000A;* Fix :provides causing crash on any request when request has no&#x000A;  Accept header [#139]&#x000A;&#x000A;* Fix that ERB templates were evaluated twice per &quot;erb&quot; call.&#x000A;&#x000A;* Fix app-level middleware not being run when the Sinatra application is&#x000A;  run as middleware.&#x000A;&#x000A;* Fixed some issues with running under Rack's CGI handler caused by&#x000A;  writing informational stuff to stdout.&#x000A;&#x000A;* Fixed that reloading was sometimes enabled when starting from a&#x000A;  rackup file [#110]&#x000A;&#x000A;* Fixed that &quot;.&quot; in route patterns erroneously matched any character&#x000A;  instead of a literal &quot;.&quot;. [#124]</pre>
            <h1>0.9.0.4 / 2009-01-25</h1>
            <pre>* Using halt with more than 1 args causes ArgumentError [#131]&#x000A;* using halt in a before filter doesn't modify response [#127]&#x000A;* Add deprecated Sinatra::EventContext to unbreak plugins [#130]&#x000A;* Give access to GET/POST params in filters [#129]&#x000A;* Preserve non-nested params in nested params hash [#117]&#x000A;* Fix backtrace dump with Rack::Lint [#116]</pre>
            <h1>0.9.0.3 / 2009-01-21</h1>
            <pre>* Fall back on mongrel then webrick when thin not found. [#75]&#x000A;* Use :environment instead of :env in test helpers to&#x000A;  fix deprecation warnings coming from framework.&#x000A;* Make sinatra/test/rspec work again [#113]&#x000A;* Fix app_file detection on windows [#118]&#x000A;* Fix static files with Rack::Lint in pipeline [#121]</pre>
            <h1>0.9.0.2 / 2009-01-18</h1>
            <pre>* Halting a before block should stop processing of routes [#85]&#x000A;* Fix redirect/halt in before filters [#85]</pre>
            <h1>0.9.0 / 2009-01-18</h1>
            <pre>* Works with and requires Rack &gt;= 0.9.1&#x000A;&#x000A;* Multiple Sinatra applications can now co-exist peacefully within a&#x000A;  single process. The new &quot;Sinatra::Base&quot; class can be subclassed to&#x000A;  establish a blank-slate Rack application or middleware component.&#x000A;  Documentation on using these features is forth-coming; the following&#x000A;  provides the basic gist: http://gist.github.com/38605&#x000A;&#x000A;* Parameters with subscripts are now parsed into a nested/recursive&#x000A;  Hash structure. e.g., &quot;post[title]=Hello&amp;post[body]=World&quot; yields&#x000A;  params: {'post' =&gt; {'title' =&gt; 'Hello', 'body' =&gt; 'World'}}.&#x000A;&#x000A;* Regular expressions may now be used in route pattens; captures are&#x000A;  available at &quot;params[:captures]&quot;.&#x000A;&#x000A;* New &quot;:provides&quot; route condition takes an array of mime types and&#x000A;  matches only when an Accept request header is present with a&#x000A;  corresponding type. [cypher]&#x000A;&#x000A;* New request-level &quot;pass&quot; method; immediately exits the current block&#x000A;  and passes control to the next matching route.&#x000A;&#x000A;* The request-level &quot;body&quot; method now takes a block; evaluation is&#x000A;  deferred until an attempt is made to read the body. The block must&#x000A;  return a String or Array.&#x000A;&#x000A;* New &quot;route conditions&quot; system for attaching rules for when a route&#x000A;  matches. The :agent and :host route options now use this system.&#x000A;&#x000A;* New &quot;dump_errors&quot; option controls whether the backtrace is dumped to&#x000A;  rack.errors when an exception is raised from a route. The option is&#x000A;  enabled by default for top-level apps.&#x000A;&#x000A;* Better default &quot;app_file&quot;, &quot;root&quot;, &quot;public&quot;, and &quot;views&quot; location&#x000A;  detection; changes to &quot;root&quot; and &quot;app_file&quot; automatically cascade to&#x000A;  other options that depend on them.&#x000A;&#x000A;* Error mappings are now split into two distinct layers: exception&#x000A;  mappings and custom error pages. Exception mappings are registered&#x000A;  with &quot;error(Exception)&quot; and are run only when the app raises an&#x000A;  exception. Custom error pages are registered with &quot;error(status_code)&quot;,&#x000A;  where &quot;status_code&quot; is an integer, and are run any time the response&#x000A;  has the status code specified. It's also possible to register an error&#x000A;  page for a range of status codes: &quot;error(500..599)&quot;.&#x000A;&#x000A;* In-file templates are now automatically imported from the file that&#x000A;  requires 'sinatra'. The use_in_file_templates! method is still available&#x000A;  for loading templates from other files.&#x000A;&#x000A;* Sinatra's testing support is no longer dependent on Test::Unit. Requiring&#x000A;  'sinatra/test' adds the Sinatra::Test module and Sinatra::TestHarness&#x000A;  class, which can be used with any test framework. The 'sinatra/test/unit',&#x000A;  'sinatra/test/spec', 'sinatra/test/rspec', or 'sinatra/test/bacon' files&#x000A;  can be required to setup a framework-specific testing environment. See the&#x000A;  README for more information.&#x000A;&#x000A;* Added support for Bacon (test framework). The 'sinatra/test/bacon' file&#x000A;  can be required to setup Sinatra test helpers on Bacon::Context.&#x000A;&#x000A;* Deprecated &quot;set_option&quot; and &quot;set_options&quot;; use &quot;set&quot; instead.&#x000A;&#x000A;* Deprecated the &quot;env&quot; option (&quot;options.env&quot;); use &quot;environment&quot; instead.&#x000A;&#x000A;* Deprecated the request level &quot;stop&quot; method; use &quot;halt&quot; instead.&#x000A;&#x000A;* Deprecated the request level &quot;entity_tag&quot; method; use &quot;etag&quot; instead.&#x000A;  Both &quot;entity_tag&quot; and &quot;etag&quot; were previously supported.&#x000A;&#x000A;* Deprecated the request level &quot;headers&quot; method (HTTP response headers);&#x000A;  use &quot;response['Header-Name']&quot; instead.&#x000A;&#x000A;* Deprecated &quot;Sinatra.application&quot;; use &quot;Sinatra::Application&quot; instead.&#x000A;&#x000A;* Deprecated setting Sinatra.application = nil to reset an application.&#x000A;  This should no longer be necessary.&#x000A;&#x000A;* Deprecated &quot;Sinatra.default_options&quot;; use&#x000A;  &quot;Sinatra::Default.set(key, value)&quot; instead.&#x000A;&#x000A;* Deprecated the &quot;ServerError&quot; exception. All Exceptions are now&#x000A;  treated as internal server errors and result in a 500 response&#x000A;  status.&#x000A;&#x000A;* Deprecated the &quot;get_it&quot;, &quot;post_it&quot;, &quot;put_it&quot;, &quot;delete_it&quot;, and &quot;head_it&quot;&#x000A;  test helper methods. Use &quot;get&quot;, &quot;post&quot;, &quot;put&quot;, &quot;delete&quot;, and &quot;head&quot;,&#x000A;  respectively, instead.&#x000A;&#x000A;* Removed Event and EventContext classes. Applications are defined in a&#x000A;  subclass of Sinatra::Base; each request is processed within an&#x000A;  instance.</pre>
            <h1>0.3.3 / 2009-01-06</h1>
            <pre>* Pin to Rack 0.4.0 (this is the last release on Rack 0.4)&#x000A;&#x000A;* Log unhandled exception backtraces to rack.errors.&#x000A;&#x000A;* Use RACK_ENV environment variable to establish Sinatra&#x000A;  environment when given. Thin sets this when started with&#x000A;  the -e argument.&#x000A;&#x000A;* BUG: raising Sinatra::NotFound resulted in a 500 response&#x000A;  code instead of 404.&#x000A;&#x000A;* BUG: use_in_file_templates! fails with CR/LF (#45)&#x000A;&#x000A;* BUG: Sinatra detects the app file and root path when run under&#x000A;  thin/passenger.</pre>
            <h1>0.3.2</h1>
            <pre>* BUG: Static and send_file read entire file into String before&#x000A;  sending. Updated to stream with 8K chunks instead.&#x000A;&#x000A;* Rake tasks and assets for building basic documentation website.&#x000A;  See http://sinatra.rubyforge.org&#x000A;&#x000A;* Various minor doc fixes.</pre>
            <h1>0.3.1</h1>
            <pre>* Unbreak optional path parameters [jeremyevans]</pre>
            <h1>0.3.0</h1>
            <pre>* Add sinatra.gemspec w/ support for github gem builds. Forks can now&#x000A;  enable the build gem option in github to get free username-sinatra.gem&#x000A;  builds: gem install username-sinatra.gem --source=http://gems.github.com/&#x000A;&#x000A;* Require rack-0.4 gem; removes frozen rack dir.&#x000A;&#x000A;* Basic RSpec support; require 'sinatra/test/rspec' instead of&#x000A;  'sinatra/test/spec' to use. [avdi]&#x000A;&#x000A;* before filters can modify request environment vars used for&#x000A;  routing (e.g., PATH_INFO, REQUEST_METHOD, etc.) for URL rewriting&#x000A;  type functionality.&#x000A;&#x000A;* In-file templates now uses @@ instead of ## as template separator.&#x000A;&#x000A;* Top-level environment test predicates: development?, test?, production?&#x000A;&#x000A;* Top-level &quot;set&quot;, &quot;enable&quot;, and &quot;disable&quot; methods for tweaking&#x000A;  app options. [rtomayko]&#x000A;&#x000A;* Top-level &quot;use&quot; method for building Rack middleware pipelines&#x000A;  leading to app. See README for usage. [rtomayko]&#x000A;&#x000A;* New &quot;reload&quot; option - set false to disable reloading in development.&#x000A;&#x000A;* New &quot;host&quot; option - host/ip to bind to [cschneid]&#x000A;&#x000A;* New &quot;app_file&quot; option - override the file to reload in development&#x000A;  mode [cschneid]&#x000A;&#x000A;* Development error/not_found page cleanup [sr, adamwiggins]&#x000A;&#x000A;* Remove a bunch of core extensions (String#to_param, String#from_param,&#x000A;  Hash#from_params, Hash#to_params, Hash#symbolize_keys, Hash#pass)&#x000A;&#x000A;* Various grammar and formatting fixes to README; additions on&#x000A;  community and contributing [cypher]&#x000A;&#x000A;* Build RDoc using Hanna template: http://sinatrarb.rubyforge.org/api&#x000A;&#x000A;* Specs, documentation and fixes for splat'n routes [vic]&#x000A;&#x000A;* Fix whitespace errors across all source files. [rtomayko]&#x000A;&#x000A;* Fix streaming issues with Mongrel (body not closed). [bmizerany]&#x000A;&#x000A;* Fix various issues with environment not being set properly (configure&#x000A;  blocks not running, error pages not registering, etc.) [cypher]&#x000A;&#x000A;* Fix to allow locals to be passed to ERB templates [cschneid]&#x000A;&#x000A;* Fix locking issues causing random errors during reload in development.&#x000A;&#x000A;* Fix for escaped paths not resolving static files [Matthew Walker]</pre>
            <h1>0.2.1</h1>
            <pre>* File upload fix and minor tweaks.</pre>
            <h1>0.2.0</h1>
            <pre>* Initial gem release of 0.2 codebase.</pre>
          </div>
          <div id='section'>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
