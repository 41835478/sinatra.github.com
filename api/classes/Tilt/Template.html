<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html lang='en'>
  <head>
    <title>: Tilt::Template [Sinatra API Documentation]</title>
    <meta content='text/html; charset=utf8' http-equiv='Content-Type'>
    <link href='../../rdoc-style.css' media='screen' rel='stylesheet' type='text/css'>
    <script type='text/javascript'>
      //<![CDATA[
        function popupCode(url) {
          window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
        }
        
        function toggleCode(id) {
          var code = document.getElementById(id)
        
          code.style.display = code.style.display != 'block' ? 'block' : 'none'
          return true
        }
        
        // Make codeblocks hidden by default
        document.writeln('<' + 'style type="text/css">.method .source pre { display: none }<\/style>')
      //]]>
    </script>
  </head>
  <body class='page'>
    <div class='class' id='wrapper'>
      <div class='header'>
        <h1 class='name'>
          <span class='type'>Class</span>
          Tilt::Template
        </h1>
        <ol class='paths'>
          <li>
            <a href="../../files/lib/sinatra/tilt_rb.html">lib/sinatra/tilt.rb</a>
          </li>
        </ol>
        <div class='parent'>
          Parent:
          <strong>Object</strong>
        </div>
      </div>
      <div id='content'>
        <div id='text'>
          <div id='description'>
            <p>
            Base class for template implementations. Subclasses must implement the <a
            href="Template.html#M000111">prepare</a> method and one of the <a
            href="Template.html#M000112">evaluate</a> or template_source methods.
            </p>
          </div>
          <div id='method-list'>
            <h2>Methods</h2>
            <h3>public class</h3>
            <ol>
              <li><a href="#M000104">new</a></li>
            </ol>
            <h3>public instance</h3>
            <ol>
              <li><a href="#M000106">basename</a></li>
              <li><a href="#M000108">eval_file</a></li>
              <li><a href="#M000107">name</a></li>
              <li><a href="#M000105">render</a></li>
            </ol>
            <h3>protected instance</h3>
            <ol>
              <li><a href="#M000117">compiled_method_name</a></li>
              <li><a href="#M000112">evaluate</a></li>
              <li><a href="#M000109">initialize_engine</a></li>
              <li><a href="#M000113">precompiled</a></li>
              <li><a href="#M000116">precompiled_postamble</a></li>
              <li><a href="#M000115">precompiled_preamble</a></li>
              <li><a href="#M000114">precompiled_template</a></li>
              <li><a href="#M000111">prepare</a></li>
              <li><a href="#M000110">require_template_library</a></li>
            </ol>
          </div>
          <div id='section'>
            <div id='aliases-list'>
              <h2>External Aliases</h2>
              <div class='name-list'>
                <table summary='External aliases'>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>engine_initialized</td>
                    <td>-&gt;</td>
                    <td class='context-item-value'>engine_initialized?</td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='attribute-list'>
              <h2 class='section-bar'>Attributes</h2>
              <div class='name-list'>
                <table>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>data</td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'>
                      
                      <a href="Template.html">Template</a> source; loaded from a file or given
                      directly.
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>engine_initialized</td>
                    <td class='context-item-value'>[RW]</td>
                    <td class='context-item-desc'></td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>file</td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'>
                      
                      The name of the file where the template data was loaded from.
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>line</td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'>
                      
                      The line number in file where template data was loaded from.
                    </td>
                  </tr>
                  <tr class='top-aligned-row context-row'>
                    <td class='context-item-name'>options</td>
                    <td class='context-item-value'>[R]</td>
                    <td class='context-item-desc'>
                      
                      A Hash of template engine specific options. This is passed directly to the
                      underlying engine and is not used by the generic template interface.
                    </td>
                  </tr>
                </table>
              </div>
            </div>
            <div id='methods'>
              <h2>Public class methods</h2>
              <div class='method public-class' id='method-M000104'>
                <a name='M000104'></a>
                <div class='synopsis'>
                  <span class='name'>new</span>
                  <span class='arguments'>(file=nil, line=1, options={}, &amp;block)</span>
                </div>
                <div class='description'>
                  <p>
                  Create a new template with the file, line, and options specified. By
                  default, template data is read from the file. When a block is given, it
                  should read template data and return as a String. When file is nil, a block
                  is required.
                  </p>
                  <p>
                  All arguments are optional.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000104-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000104-source'>     <span class="ruby-comment cmt"># File lib/sinatra/tilt.rb, line 96</span>&#x000A; 96:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize</span>(<span class="ruby-identifier">file</span>=<span class="ruby-keyword kw">nil</span>, <span class="ruby-identifier">line</span>=<span class="ruby-value">1</span>, <span class="ruby-identifier">options</span>={}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A; 97:       <span class="ruby-ivar">@file</span>, <span class="ruby-ivar">@line</span>, <span class="ruby-ivar">@options</span> = <span class="ruby-keyword kw">nil</span>, <span class="ruby-value">1</span>, {}&#x000A; 98: &#x000A; 99:       [<span class="ruby-identifier">options</span>, <span class="ruby-identifier">line</span>, <span class="ruby-identifier">file</span>].<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword kw">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">arg</span><span class="ruby-operator">|</span>&#x000A;100:         <span class="ruby-keyword kw">case</span>&#x000A;101:         <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_str</span>)  ; <span class="ruby-ivar">@file</span> = <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">to_str</span>&#x000A;102:         <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_int</span>)  ; <span class="ruby-ivar">@line</span> = <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">to_int</span>&#x000A;103:         <span class="ruby-keyword kw">when</span> <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:to_hash</span>) ; <span class="ruby-ivar">@options</span> = <span class="ruby-identifier">arg</span>.<span class="ruby-identifier">to_hash</span>&#x000A;104:         <span class="ruby-keyword kw">else</span> <span class="ruby-identifier">raise</span> <span class="ruby-constant">TypeError</span>&#x000A;105:         <span class="ruby-keyword kw">end</span>&#x000A;106:       <span class="ruby-keyword kw">end</span>&#x000A;107: &#x000A;108:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">ArgumentError</span>, <span class="ruby-value str">&quot;file or block required&quot;</span> <span class="ruby-keyword kw">if</span> (<span class="ruby-ivar">@file</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">block</span>).<span class="ruby-identifier">nil?</span>&#x000A;109: &#x000A;110:       <span class="ruby-comment cmt"># call the initialize_engine method if this is the very first time</span>&#x000A;111:       <span class="ruby-comment cmt"># an instance of this class has been created.</span>&#x000A;112:       <span class="ruby-keyword kw">if</span> <span class="ruby-operator">!</span><span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">engine_initialized?</span>&#x000A;113:         <span class="ruby-identifier">initialize_engine</span>&#x000A;114:         <span class="ruby-keyword kw">self</span>.<span class="ruby-identifier">class</span>.<span class="ruby-identifier">engine_initialized</span> = <span class="ruby-keyword kw">true</span>&#x000A;115:       <span class="ruby-keyword kw">end</span>&#x000A;116: &#x000A;117:       <span class="ruby-comment cmt"># used to generate unique method names for template compilation</span>&#x000A;118:       <span class="ruby-ivar">@stamp</span> = (<span class="ruby-constant">Time</span>.<span class="ruby-identifier">now</span>.<span class="ruby-identifier">to_f</span> <span class="ruby-operator">*</span> <span class="ruby-value">10000</span>).<span class="ruby-identifier">to_i</span>&#x000A;119:       <span class="ruby-ivar">@compiled_method_names</span> = {}&#x000A;120: &#x000A;121:       <span class="ruby-comment cmt"># load template data and prepare</span>&#x000A;122:       <span class="ruby-ivar">@reader</span> = <span class="ruby-identifier">block</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">lambda</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">t</span><span class="ruby-operator">|</span> <span class="ruby-constant">File</span>.<span class="ruby-identifier">read</span>(<span class="ruby-ivar">@file</span>) }&#x000A;123:       <span class="ruby-ivar">@data</span> = <span class="ruby-ivar">@reader</span>.<span class="ruby-identifier">call</span>(<span class="ruby-keyword kw">self</span>)&#x000A;124:       <span class="ruby-identifier">prepare</span>&#x000A;125:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <h2>Public instance methods</h2>
              <div class='method public-instance' id='method-M000106'>
                <a name='M000106'></a>
                <div class='synopsis'>
                  <span class='name'>basename</span>
                  <span class='arguments'>(suffix='')</span>
                </div>
                <div class='description'>
                  <p>
                  The basename of the template file.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000106-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000106-source'>     <span class="ruby-comment cmt"># File lib/sinatra/tilt.rb, line 135</span>&#x000A;135:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">basename</span>(<span class="ruby-identifier">suffix</span>=<span class="ruby-value str">''</span>)&#x000A;136:       <span class="ruby-constant">File</span>.<span class="ruby-identifier">basename</span>(<span class="ruby-identifier">file</span>, <span class="ruby-identifier">suffix</span>) <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">file</span>&#x000A;137:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000108'>
                <a name='M000108'></a>
                <div class='synopsis'>
                  <span class='name'>eval_file</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  The filename used in backtraces to describe the template.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000108-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000108-source'>     <span class="ruby-comment cmt"># File lib/sinatra/tilt.rb, line 145</span>&#x000A;145:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">eval_file</span>&#x000A;146:       <span class="ruby-identifier">file</span> <span class="ruby-operator">||</span> <span class="ruby-value str">'(__TEMPLATE__)'</span>&#x000A;147:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000107'>
                <a name='M000107'></a>
                <div class='synopsis'>
                  <span class='name'>name</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  The template file&#8217;s basename with all extensions chomped off.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000107-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000107-source'>     <span class="ruby-comment cmt"># File lib/sinatra/tilt.rb, line 140</span>&#x000A;140:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">name</span>&#x000A;141:       <span class="ruby-identifier">basename</span>.<span class="ruby-identifier">split</span>(<span class="ruby-value str">'.'</span>, <span class="ruby-value">2</span>).<span class="ruby-identifier">first</span> <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">basename</span>&#x000A;142:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method public-instance' id='method-M000105'>
                <a name='M000105'></a>
                <div class='synopsis'>
                  <span class='name'>render</span>
                  <span class='arguments'>(scope=Object.new, locals={}, &amp;block)</span>
                </div>
                <div class='description'>
                  <p>
                  Render the template in the given scope with the locals specified. If a
                  block is given, it is typically available within the template via
                  <tt>yield</tt>.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000105-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000105-source'>     <span class="ruby-comment cmt"># File lib/sinatra/tilt.rb, line 130</span>&#x000A;130:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">render</span>(<span class="ruby-identifier">scope</span>=<span class="ruby-constant">Object</span>.<span class="ruby-identifier">new</span>, <span class="ruby-identifier">locals</span>={}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A;131:       <span class="ruby-identifier">evaluate</span> <span class="ruby-identifier">scope</span>, <span class="ruby-identifier">locals</span> <span class="ruby-operator">||</span> {}, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>&#x000A;132:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <h2>Protected instance methods</h2>
              <div class='method protected-instance' id='method-M000117'>
                <a name='M000117'></a>
                <div class='synopsis'>
                  <span class='name'>compiled_method_name</span>
                  <span class='arguments'>(locals_keys)</span>
                </div>
                <div class='description'>
                  <p>
                  The unique compiled method name for the locals keys provided.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000117-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000117-source'>     <span class="ruby-comment cmt"># File lib/sinatra/tilt.rb, line 248</span>&#x000A;248:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">compiled_method_name</span>(<span class="ruby-identifier">locals_keys</span>)&#x000A;249:       <span class="ruby-ivar">@compiled_method_names</span>[<span class="ruby-identifier">locals_keys</span>] <span class="ruby-operator">||=</span>&#x000A;250:         <span class="ruby-identifier">generate_compiled_method_name</span>(<span class="ruby-identifier">locals_keys</span>)&#x000A;251:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method protected-instance' id='method-M000112'>
                <a name='M000112'></a>
                <div class='synopsis'>
                  <span class='name'>evaluate</span>
                  <span class='arguments'>(scope, locals, &amp;block)</span>
                </div>
                <div class='description'>
                  <p>
                  Process the template and return the result. When the scope mixes in the <a
                  href="CompileSite.html">Tilt::CompileSite</a> module, the template is
                  compiled to a method and reused given identical locals keys. When the scope
                  object does not mix in the <a href="CompileSite.html">CompileSite</a>
                  module, the template source is evaluated with instance_eval. In any case,
                  template executation is guaranteed to be performed in the scope object with
                  the locals specified and with support for yielding to the block.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000112-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000112-source'>     <span class="ruby-comment cmt"># File lib/sinatra/tilt.rb, line 188</span>&#x000A;188:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">evaluate</span>(<span class="ruby-identifier">scope</span>, <span class="ruby-identifier">locals</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A;189:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:__tilt__</span>)&#x000A;190:         <span class="ruby-identifier">method_name</span> = <span class="ruby-identifier">compiled_method_name</span>(<span class="ruby-identifier">locals</span>.<span class="ruby-identifier">keys</span>)&#x000A;191:         <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">method_name</span>)&#x000A;192:           <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">method_name</span>, <span class="ruby-identifier">locals</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A;193:         <span class="ruby-keyword kw">else</span>&#x000A;194:           <span class="ruby-identifier">compile_template_method</span>(<span class="ruby-identifier">method_name</span>, <span class="ruby-identifier">locals</span>)&#x000A;195:           <span class="ruby-identifier">scope</span>.<span class="ruby-identifier">send</span>(<span class="ruby-identifier">method_name</span>, <span class="ruby-identifier">locals</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A;196:         <span class="ruby-keyword kw">end</span>&#x000A;197:       <span class="ruby-keyword kw">else</span>&#x000A;198:         <span class="ruby-identifier">evaluate_source</span>(<span class="ruby-identifier">scope</span>, <span class="ruby-identifier">locals</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">block</span>)&#x000A;199:       <span class="ruby-keyword kw">end</span>&#x000A;200:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method protected-instance' id='method-M000109'>
                <a name='M000109'></a>
                <div class='synopsis'>
                  <span class='name'>initialize_engine</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Called once and only once for each template subclass the first time the
                  template class is initialized. This should be used to require the
                  underlying template library and perform any initial setup.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000109-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000109-source'>     <span class="ruby-comment cmt"># File lib/sinatra/tilt.rb, line 153</span>&#x000A;153:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">initialize_engine</span>&#x000A;154:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method protected-instance' id='method-M000113'>
                <a name='M000113'></a>
                <div class='synopsis'>
                  <span class='name'>precompiled</span>
                  <span class='arguments'>(locals)</span>
                </div>
                <div class='description'>
                  <p>
                  Generates all template source by combining the preamble, template, and
                  postamble and returns a two-tuple of the form: [source, offset], where
                  source is the string containing (Ruby) source code for the template and
                  offset is the integer line offset where line reporting should begin.
                  </p>
                  <p>
                  <a href="Template.html">Template</a> subclasses may override this method
                  when they need complete control over source generation or want to adjust
                  the default line offset. In most cases, overriding the <a
                  href="Template.html#M000114">precompiled_template</a> method is easier and
                  more appropriate.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000113-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000113-source'>     <span class="ruby-comment cmt"># File lib/sinatra/tilt.rb, line 211</span>&#x000A;211:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">precompiled</span>(<span class="ruby-identifier">locals</span>)&#x000A;212:       <span class="ruby-identifier">preamble</span> = <span class="ruby-identifier">precompiled_preamble</span>(<span class="ruby-identifier">locals</span>)&#x000A;213:       <span class="ruby-identifier">parts</span> = [&#x000A;214:         <span class="ruby-identifier">preamble</span>,&#x000A;215:         <span class="ruby-identifier">precompiled_template</span>(<span class="ruby-identifier">locals</span>),&#x000A;216:         <span class="ruby-identifier">precompiled_postamble</span>(<span class="ruby-identifier">locals</span>)&#x000A;217:       ]&#x000A;218:       [<span class="ruby-identifier">parts</span>.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>), <span class="ruby-identifier">preamble</span>.<span class="ruby-identifier">count</span>(<span class="ruby-value str">&quot;\n&quot;</span>) <span class="ruby-operator">+</span> <span class="ruby-value">1</span>]&#x000A;219:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method protected-instance' id='method-M000116'>
                <a name='M000116'></a>
                <div class='synopsis'>
                  <span class='name'>precompiled_postamble</span>
                  <span class='arguments'>(locals)</span>
                </div>
                <div class='description'>
                  <p>
                  Generates postamble code for the precompiled template source. The string
                  returned from this method is appended to the precompiled template source.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000116-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000116-source'>     <span class="ruby-comment cmt"># File lib/sinatra/tilt.rb, line 243</span>&#x000A;243:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">precompiled_postamble</span>(<span class="ruby-identifier">locals</span>)&#x000A;244:       <span class="ruby-value str">''</span>&#x000A;245:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method protected-instance' id='method-M000115'>
                <a name='M000115'></a>
                <div class='synopsis'>
                  <span class='name'>precompiled_preamble</span>
                  <span class='arguments'>(locals)</span>
                </div>
                <div class='description'>
                  <p>
                  Generates preamble code for initializing template state, and performing
                  locals assignment. The default implementation performs locals assignment
                  only. Lines included in the preamble are subtracted from the source line
                  offset, so adding code to the preamble does not effect line reporting in
                  Kernel::caller and backtraces.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000115-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000115-source'>     <span class="ruby-comment cmt"># File lib/sinatra/tilt.rb, line 236</span>&#x000A;236:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">precompiled_preamble</span>(<span class="ruby-identifier">locals</span>)&#x000A;237:       <span class="ruby-identifier">locals</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">k</span>,<span class="ruby-identifier">v</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{k} = locals[:#{k}]&quot;</span> }.<span class="ruby-identifier">join</span>(<span class="ruby-value str">&quot;\n&quot;</span>)&#x000A;238:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method protected-instance' id='method-M000114'>
                <a name='M000114'></a>
                <div class='synopsis'>
                  <span class='name'>precompiled_template</span>
                  <span class='arguments'>(locals)</span>
                </div>
                <div class='description'>
                  <p>
                  A string containing the (Ruby) source code for the template. The default <a
                  href="Template.html#M000112">Template#evaluate</a> implementation requires
                  either this method or the <a href="Template.html#M000113">precompiled</a>
                  method be overridden. When defined, the base <a
                  href="Template.html">Template</a> guarantees correct file/line handling,
                  locals support, custom scopes, and support for template compilation when
                  the scope object allows it.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000114-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000114-source'>     <span class="ruby-comment cmt"># File lib/sinatra/tilt.rb, line 227</span>&#x000A;227:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">precompiled_template</span>(<span class="ruby-identifier">locals</span>)&#x000A;228:       <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>&#x000A;229:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method protected-instance' id='method-M000111'>
                <a name='M000111'></a>
                <div class='synopsis'>
                  <span class='name'>prepare</span>
                  <span class='arguments'>()</span>
                </div>
                <div class='description'>
                  <p>
                  Do whatever preparation is necessary to setup the underlying template
                  engine. Called immediately after template data is loaded. Instance
                  variables set in this method are available when <a
                  href="Template.html#M000112">evaluate</a> is called.
                  </p>
                  <p>
                  Subclasses must provide an implementation of this method.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000111-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000111-source'>     <span class="ruby-comment cmt"># File lib/sinatra/tilt.rb, line 171</span>&#x000A;171:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">prepare</span>&#x000A;172:       <span class="ruby-keyword kw">if</span> <span class="ruby-identifier">respond_to?</span>(<span class="ruby-identifier">:compile!</span>)&#x000A;173:         <span class="ruby-comment cmt"># backward compat with tilt &lt; 0.6; just in case</span>&#x000A;174:         <span class="ruby-identifier">warn</span> <span class="ruby-value str">'Tilt::Template#compile! is deprecated; implement #prepare instead.'</span>&#x000A;175:         <span class="ruby-identifier">compile!</span>&#x000A;176:       <span class="ruby-keyword kw">else</span>&#x000A;177:         <span class="ruby-identifier">raise</span> <span class="ruby-constant">NotImplementedError</span>&#x000A;178:       <span class="ruby-keyword kw">end</span>&#x000A;179:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
              <div class='method protected-instance' id='method-M000110'>
                <a name='M000110'></a>
                <div class='synopsis'>
                  <span class='name'>require_template_library</span>
                  <span class='arguments'>(name)</span>
                </div>
                <div class='description'>
                  <p>
                  Like Kernel::require but issues a warning urging a manual require when
                  running under a threaded environment.
                  </p>
                </div>
                <div class='source'>
                  <a class='source-toggle' href='#' onclick="toggleCode('M000110-source'); return false">
                    [show source]
                  </a>
                  <pre id='M000110-source'>     <span class="ruby-comment cmt"># File lib/sinatra/tilt.rb, line 158</span>&#x000A;158:     <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">require_template_library</span>(<span class="ruby-identifier">name</span>)&#x000A;159:       <span class="ruby-keyword kw">if</span> <span class="ruby-constant">Thread</span>.<span class="ruby-identifier">list</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>&#x000A;160:         <span class="ruby-identifier">warn</span> <span class="ruby-node">&quot;WARN: tilt autoloading '#{name}' in a non thread-safe way; &quot;</span> <span class="ruby-operator">+</span>&#x000A;161:              <span class="ruby-node">&quot;explicit require '#{name}' suggested.&quot;</span>&#x000A;162:       <span class="ruby-keyword kw">end</span>&#x000A;163:       <span class="ruby-identifier">require</span> <span class="ruby-identifier">name</span>&#x000A;164:     <span class="ruby-keyword kw">end</span></pre>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div id='footer-push'></div>
    </div>
    <div id='footer'>
      <a href="http://github.com/mislav/hanna/tree/master"><strong>Hanna</strong> RDoc template</a>
    </div>
  </body>
</html>
